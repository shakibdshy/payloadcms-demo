"use strict";(self.webpackChunkpayload_template_ts_blog=self.webpackChunkpayload_template_ts_blog||[]).push([[491],{86491:(e,a,t)=>{t.r(a),t.d(a,{default:()=>O});var l=t(67294),n=t(16550),i=t(26793),s=t(9980),r=t(28630),c=t(75091),o=t(47489),d=t(40684),m=t(73727),u=t(49546),v=t(28584),p=t(26644),E=t(4983),_=t(46268),g=t(5590),$=t(55532),f=t(43814),h=t(38398),b=t(50854),Z=t(37276),N=t(73588),w=t(40829),y=t(9684),S=t(92962),k=t(10935);const P=()=>{const{theme:e,setTheme:a,autoMode:t}=(0,k.Fg)(),{t:n}=(0,i.$)("general"),s=(0,l.useCallback)((e=>{a(e)}),[a]);return l.createElement(S.Z,{name:"theme",label:n("adminTheme"),value:t?"auto":e,onChange:s,options:[{label:n("automatic"),value:"auto"},{label:n("light"),value:"light"},{label:n("dark"),value:"dark"}]})};var A=t(69850),C=t(91828),L=t(953);t(30086);const T="account",U=e=>{var a,t,n,r;const{collection:c,data:o,permissions:d,hasSavePermission:S,apiURL:k,initialState:U,isLoading:R,action:D,onSave:F}=e,{slug:I,fields:O,admin:{useAsTitle:K,preview:j},timestamps:M,auth:x}=c,{admin:{dateFormat:B},routes:{admin:G}}=(0,s.Z)(),{t:H,i18n:q}=(0,i.$)("authentication"),z=Object.entries(q.options.resources).map((([e,a])=>({label:a.general.thisLanguage,value:e}))),J=[T].filter(Boolean).join(" ");return l.createElement("div",{className:J},R&&l.createElement(w.Z,null),!R&&l.createElement(y.R.Provider,{value:"update"},l.createElement(p.Z,{className:`${T}__form`,method:"patch",action:D,onSuccess:F,initialState:U,disabled:!S},l.createElement("div",{className:`${T}__main`},l.createElement(Z.Z,{title:H("account"),description:H("accountOfCurrentUser"),keywords:H("account")}),l.createElement(v.Z,null),!((null===(a=c.versions)||void 0===a?void 0:a.drafts)&&(null===(n=null===(t=c.versions)||void 0===t?void 0:t.drafts)||void 0===n?void 0:n.autosave))&&l.createElement(b.Z,null),l.createElement("div",{className:`${T}__edit`},l.createElement(A.T,{className:`${T}__header`},l.createElement("h1",null,l.createElement(h.Z,{data:o,useAsTitle:K,fallback:`[${H("general:untitled")}]`})),l.createElement(N.Z,{useAPIKey:x.useAPIKey,collection:c,email:null==o?void 0:o.email,operation:"update"}),l.createElement(g.Z,{permissions:d.fields,readOnly:!S,filter:e=>{var a;return"sidebar"!==(null===(a=null==e?void 0:e.admin)||void 0===a?void 0:a.position)},fieldTypes:f.Z,fieldSchema:O})),l.createElement(A.T,{className:`${T}__payload-settings`},l.createElement("h3",null,H("general:payloadSettings")),l.createElement("div",{className:`${T}__language`},l.createElement(L.Z,{label:H("general:language")}),l.createElement(C.Z,{value:z.find((e=>e.value===q.language)),options:z,onChange:({value:e})=>q.changeLanguage(e)})),l.createElement(P,null)))),l.createElement("div",{className:`${T}__sidebar-wrap`},l.createElement("div",{className:`${T}__sidebar`},l.createElement("div",{className:`${T}__sidebar-sticky-wrap`},l.createElement("ul",{className:`${T}__collection-actions`},(null===(r=null==d?void 0:d.create)||void 0===r?void 0:r.permission)&&l.createElement(l.Fragment,null,l.createElement("li",null,l.createElement(m.Link,{to:`${G}/collections/${I}/create`},H("general:createNew"))))),l.createElement("div",{className:`${T}__document-actions${j?` ${T}__document-actions--with-preview`:""}`},l.createElement(E.Z,{generatePreviewURL:j,data:o}),S&&l.createElement(_.Z,{buttonId:"action-save"},H("general:save"))),l.createElement("div",{className:`${T}__sidebar-fields`},l.createElement(g.Z,{permissions:d.fields,readOnly:!S,filter:e=>{var a;return"sidebar"===(null===(a=null==e?void 0:e.admin)||void 0===a?void 0:a.position)},fieldTypes:f.Z,fieldSchema:O})),l.createElement("ul",{className:`${T}__meta`},l.createElement("li",{className:`${T}__api-url`},l.createElement("span",{className:`${T}__label`},"API URL"," ",l.createElement($.Z,{value:k})),l.createElement("a",{href:k,target:"_blank",rel:"noopener noreferrer"},k)),l.createElement("li",null,l.createElement("div",{className:`${T}__label`},"ID"),l.createElement("div",null,null==o?void 0:o.id)),M&&l.createElement(l.Fragment,null,o.updatedAt&&l.createElement("li",null,l.createElement("div",{className:`${T}__label`},H("general:lastModified")),l.createElement("div",null,(0,u.default)(new Date(o.updatedAt),B))),o.createdAt&&l.createElement("li",null,l.createElement("div",{className:`${T}__label`},H("general:created")),l.createElement("div",null,(0,u.default)(new Date(o.createdAt),B)))))))))))};var R=t(19826),D=t(2143),F=t(45074),I=t(91455);const O=()=>{var e;const{state:a}=(0,n.TH)(),t=(0,d.bU)(),{setStepNav:m}=(0,c.FP)(),{user:u}=(0,r.a)(),[v,p]=(0,l.useState)(),{id:E,preferencesKey:_,docPermissions:g,getDocPermissions:$,slug:f}=(0,F.x)(),{getPreference:h}=(0,I.G)(),{serverURL:b,routes:{api:Z},collections:N,admin:{components:{views:{Account:w}={Account:void 0}}={}}}=(0,s.Z)(),{t:y}=(0,i.$)("authentication"),S=N.find((e=>e.slug===f)),{fields:k}=S,[{data:P}]=(0,o.Z)(`${b}${Z}/${f}/${E}`,{initialParams:{"fallback-locale":"null",depth:0}}),A=null===(e=null==g?void 0:g.update)||void 0===e?void 0:e.permission,C=(null==a?void 0:a.data)||P,L=`${b}${Z}/${f}/${null==P?void 0:P.id}`,T=`${b}${Z}/${f}/${null==P?void 0:P.id}?locale=${t}&depth=0`,O=l.useCallback((async e=>{$();const a=await(0,R.Z)({fieldSchema:S.fields,data:e.doc,user:u,id:E,operation:"update",locale:t,t:y});p(a)}),[S,u,E,y,t,$]);return(0,l.useEffect)((()=>{const e=[{label:y("account")}];m(e)}),[m,y]),(0,l.useEffect)((()=>{(async()=>{const e=await(0,R.Z)({fieldSchema:k,data:C,operation:"update",id:E,user:u,locale:t,t:y});await h(_),p(e)})()}),[C,k,E,u,t,_,h,y]),l.createElement(D.Z,{DefaultComponent:U,CustomComponent:w,componentProps:{action:T,data:P,collection:S,permissions:g,hasSavePermission:A,initialState:v,apiURL:L,isLoading:!v||!g,onSave:O}})}}}]);